<?php
namespace Masterchain;
$home=realpath(dirname(dirname(dirname(__file__))));
include($home.'/src/Afocha.php');
include($home.'/src/Number.php');
include($home.'/src/Masterchain.php');

function checkOp($range,$target)
{
        $op="";
        $status=0;
        if ($range==$target) {
                $op .="=";
                $status=1;
        }elseif ($range<$target) {
                $op .="<";
        }else{
                $op.=">";
        }
        if(!$status){
                checkOp();
        }
        return $op;
}

$games = ["0000000000000000000000000000000000000000000000000000000000000001","0000000000000000000000000000000000000000000000000000000000000003","0000000000000000000000000000000000000000000000000000000000000007","0000000000000000000000000000000000000000000000000000000000000008","0000000000000000000000000000000000000000000000000000000000000015","0000000000000000000000000000000000000000000000000000000000000031","000000000000000000000000000000000000000000000000000000000000004c","00000000000000000000000000000000000000000000000000000000000000e0","00000000000000000000000000000000000000000000000000000000000001d3","0000000000000000000000000000000000000000000000000000000000000202","0000000000000000000000000000000000000000000000000000000000000483","0000000000000000000000000000000000000000000000000000000000000a7b","0000000000000000000000000000000000000000000000000000000000001460","0000000000000000000000000000000000000000000000000000000000002930","00000000000000000000000000000000000000000000000000000000000068f3","000000000000000000000000000000000000000000000000000000000000c936","000000000000000000000000000000000000000000000000000000000001764f","000000000000000000000000000000000000000000000000000000000003080d","000000000000000000000000000000000000000000000000000000000005749f","00000000000000000000000000000000000000000000000000000000000d2c55","00000000000000000000000000000000000000000000000000000000001ba534","00000000000000000000000000000000000000000000000000000000002de40f","0000000000000000000000000000000000000000000000000000000000556e52","0000000000000000000000000000000000000000000000000000000000dc2a04","0000000000000000000000000000000000000000000000000000000001fa5ee5","000000000000000000000000000000000000000000000000000000000340326e","0000000000000000000000000000000000000000000000000000000006ac3875","000000000000000000000000000000000000000000000000000000000d916ce8","0000000000000000000000000000000000000000000000000000000017e2551e","000000000000000000000000000000000000000000000000000000003d94cd64","000000000000000000000000000000000000000000000000000000007d4fe747","00000000000000000000000000000000000000000000000000000000b862a62e","00000000000000000000000000000000000000000000000000000001a96ca8d8","000000000000000000000000000000000000000000000000000000034a65911d","00000000000000000000000000000000000000000000000000000004aed21170","00000000000000000000000000000000000000000000000000000009de820a7c","0000000000000000000000000000000000000000000000000000001757756a93","00000000000000000000000000000000000000000000000000000022382facd0","0000000000000000000000000000000000000000000000000000004b5f8303e9","000000000000000000000000000000000000000000000000000000e9ae4933d6","00000000000000000000000000000000000000000000000000000153869acc5b","000000000000000000000000000000000000000000000000000002a221c58d8f","000000000000000000000000000000000000000000000000000006bd3b27c591","00000000000000000000000000000000000000000000000000000e02b35a358f","0000000000000000000000000000000000000000000000000000122fca143c05","00000000000000000000000000000000000000000000000000002ec18388d544","00000000000000000000000000000000000000000000000000006cd610b53cba","0000000000000000000000000000000000000000000000000000ade6d7ce3b9b","000000000000000000000000000000000000000000000000000174176b015f4d","00000000000000000000000000000000000000000000000000022bd43c2e9354","00000000000000000000000000000000000000000000000000075070a1a009d4","000000000000000000000000000000000000000000000000000efae164cb9e3c","00000000000000000000000000000000000000000000000000180788e47e326c","00000000000000000000000000000000000000000000000000236fb6d5ad1f43","000000000000000000000000000000000000000000000000006abe1f9b67e114","000000000000000000000000000000000000000000000000009d18b63ac4ffdf","00000000000000000000000000000000000000000000000001eb25c90795d61c","00000000000000000000000000000000000000000000000002c675b852189a21","00000000000000000000000000000000000000000000000007496cbb87cab44f","0000000000000000000000000000000000000000000000000fc07a1825367bbe","00000000000000000000000000000000000000000000000013c96a3742f64906","000000000000000000000000000000000000000000000000363d541eb611abee","0000000000000000000000000000000000000000000000007cce5efdaccf6808","000000000000000000000000000000000000000000000000f7051f27b09112d4","000000000000000000000000000000000000000000000001a838b13505b26867","0000000000000000000000000000000000000000000000349b84b6431a6c4ef1","0000000000000000000000000000000000000000000004c5ce114686a1336e07","00000000000000000000000000000000000000000000ea1a5c66dcc11b5ad180","00000000000000000000000000000000000000000011720c4f018d51b8cebba8","000000000000000000000000000000000000000002ce00bb2136a445c71e85bf","0000000000000000000000000000000000000000527a792b183c7f64a0e8b1f4","000000000000000000000000000000000000000af55fc59c335c8ec67ed24826","000000000000000000000000000000000000016f14fc2054cd87ee6396b33df3","00000000000000000000000000000000000035c0d7234df7deb0f20cf7062444","0000000000000000000000000000000000060f4d11574f5deee49961d9609ac6"];

$target="13zb1hQbWVsc2S7ZTZnP2G4undNNpdh5so";

$input = 3290000000;
$output= 3289600000;
$op = ($output/100);
$fee = 400000;
$price = 100000;

$max_buy = 25600000;
$suplied = 0;

echo $output."=100%<br>";
echo $op."=1%<br>";
echo $max_buy."= max price<br>";
echo $price."= min price<hr>";

$g = new Gen($start);

$subsidy=0;

for ($i=0; $i <=256; $i++) { 
$nxt=($i+1);
$x = bcpow(2,$i);
$x16 = $g->dec2hex($x);
$y_=bcpow(2,$nxt);
$y=bcsub($y_,1);
$y16=$g->dec2hex($y);

$dif=bcsub($y,$x);

$difX=bcsqrt($dif);

$era=strlen($x16);

$best=bcdiv($difX,$era);
$subsidy = ($subsidy +$nxt);
$gprice = bcmul($price,$nxt);
$grate = ($gprice/$op);
$suplied = ($suplied+$gprice);
$suplied_rate = ($suplied/$op);
$po = bcmul($dif, $suplied_rate);

$geck = bcadd($era,$dif);
$geck16 = $g->dec2hex($geck);
$wiz = ($dif+$difX);
$wiz16 = $g->dec2hex($wiz);

        //echo "target: ".$apy->{"8389f34c98c606322740c0be6a7125d9860bb8d5cb182c02f98461e5fa6cd15"}[0]."<br>";
        echo \Afocha::fpad('*','30','<>','+')."<br>";
        echo "block: ".$nxt."<br>";
        echo "hash : ".$games[$i]."<br>";
        echo "hashi: ".$g->hex2dec($games[$i])."<br>";
        echo "blockx: ".$g->get_address_by_hex($games[$i])."<br>";
	echo "puzz : (2<sup>{$i}</sup> ~ 2<sup>".$nxt."</sup>-1)<br>";
        echo "hexa : (".$x16." ~ ".$y16.")<br>";
        echo "deci : (".$x." ~ ".$y.")<br>";
        echo "ETI (estimated try index): ".$difX."<br>";
        echo "EI (estimate index) : ".$geck."<br>";
        echo "EI Hex : ".$geck16."<br>";
        echo "Subsidy : ".$subsidy."<br>";
        echo "price : ".$gprice."<br>";
        echo "percentage : ".$grate."%<br>";
        echo "suplied : ".$suplied."<br>";
        echo "suplied rate: ".$suplied_rate."%<br>";
        echo "predicted option : ".$po."<br>";
        echo "Wiz : 0x".$wiz16." ~ ".$wiz."<br>";
        echo "TTI (Total Try Index): ".$dif."<hr>";
}





